{
    "problem_data" :
    {
        "start_time" : 0.0,
        "end_time" : 12,
        "echo_level" : 0,
        "print_colors" : true,
        "parallel_type" : "OpenMP"
    },
    "solver_settings" :
    {
        "type" : "coupled_solvers.volume_coupling",
        "echo_level" : 0,
        "data_transfer_operators" : {
            "mapper_1" : {
                "type" : "kratos_mapping",
                "mapper_settings" : {
                    "mapper_type" : "nearest_element",
					"use_approximation": false,
						"search_settings" : {
											"search_radius": 0.1
										}
									}	
            }

        },
		"coupling_operations" : {
            
			"compute_dem_momentum": {
                "type"       : "compute_dem_momentum",
                "echo_level" : 0,
                "solver"            : "dem",
                "model_part_name"   : "SpheresPart.DEMParts_Define_particle_groups_Auto1"
            },
			"compute_nodal_force_process": {
                "type"       : "compute_dem_fem_volume_coupling_force",
                "echo_level" : 0,
                "solver"            : "structure",
                "model_part_name"   : "Structure.Parts_Solid_Solid_Auto1",
				"timestep"			: 1e-5,
				"penalty_max"		: 1e11,
				"force_end_time"	: 0.025,
				"boundary_tolerance": 1e-3,
				"y_fem_boundary"    :0.04,
				"y_dem_boundary"    :0.08,
				"weight_fem_boundary" :0.1,
				"weight_dem_boundary" :0.9
            }
        },
        "coupling_sequence": [
		{
			"name": "dem",
			"input_data_list": [],
			"output_data_list": []
		},
		{
			"name": "structure",
			"input_data_list": [
				
				{
					"data": "nodalmass",
					"from_solver": "dem",
					"from_solver_data": "nodalmass_d",
					"data_transfer_operator": "mapper_1",
					"data_transfer_operator_options": ["use_transpose"]
				},
				{
					"data": "displacementmultipliedmass",
					"from_solver": "dem",
					"from_solver_data": "displacementmultipliedmass_d",
					"data_transfer_operator": "mapper_1",
					"data_transfer_operator_options": ["use_transpose"]
				},
				{
					"data": "velocitymultipliedmass",
					"from_solver": "dem",
					"from_solver_data": "velocitymultipliedmass_d",
					"data_transfer_operator": "mapper_1",
					"data_transfer_operator_options": ["use_transpose"]
				}
	
			],
			"output_data_list": [
				{
                        "data"           : "couplingforces",
                        "to_solver"      : "dem",
                        "to_solver_data" : "couplingforces_d",
                        "data_transfer_operator" : "mapper_1"
                },
				{
                        "data"           : "nodalcouplingweight",
                        "to_solver"      : "dem",
                        "to_solver_data" : "particlecouplingweight",
                        "data_transfer_operator" : "mapper_1"
                }
		
			]
		}
		],

        "solvers" :
        {
            "dem":
            {
                "type" : "solver_wrappers.kratos.dem_wrapper",
                "solver_wrapper_settings" : {
                    "input_file"           : "dem/ProjectParametersDEM",
					"move_mesh_model_part" : [],
                    "working_directory"    : "dem"
                },
				"data" : {
                    "particlecouplingweight" : {
                        "model_part_name" : "SpheresPart.DEMParts_Define_particle_groups_Auto1",
                        "variable_name"   : "PARTICLE_COUPLING_WEIGHT"
                    },
					"couplingforces_d" : {
                        "model_part_name" : "SpheresPart.DEMParts_Define_particle_groups_Auto1",
                        "variable_name"   : "EXTERNAL_APPLIED_FORCE",
                        "dimension"       : 3
                    },
					 "displacementmultipliedmass_d" : {
                        "model_part_name" : "SpheresPart.DEMParts_Define_particle_groups_Auto1",
                        "variable_name"   : "DISPLACEMENT_MULTIPLIED_MASS",
                        "dimension"       : 3
                    },
					"velocitymultipliedmass_d" : {
                        "model_part_name" : "SpheresPart.DEMParts_Define_particle_groups_Auto1",
                        "variable_name"   : "VELOCITY_MULTIPLIED_MASS",
                        "dimension"       : 3
                    },
					
					"nodalmass_d" : {
                        "model_part_name" : "SpheresPart.DEMParts_Define_particle_groups_Auto1",
                        "variable_name"   : "NODAL_MASS"
       
                    }
                }
            },
			
            "structure" :
            {
                "type" : "solver_wrappers.kratos.volume_coupling_structural_wrapper",
                "solver_wrapper_settings" : {
                    "input_file"  : "fem/ProjectParametersFEM"
                },
				"data": {
				"displacementmultipliedmass": {
					"model_part_name": "Structure.Parts_Solid_Solid_Auto1",
					"variable_name": "DISPLACEMENT_MULTIPLIED_MASS",
					"dimension": 3
				},
				"velocitymultipliedmass": {
					"model_part_name": "Structure.Parts_Solid_Solid_Auto1",
					"variable_name": "VELOCITY_MULTIPLIED_MASS",
					"dimension": 3
				},
				"nodalcouplingweight": {
					"model_part_name": "Structure.Parts_Solid_Solid_Auto1",
					"variable_name": "NODAL_COUPLING_WEIGHT"
				},
				"nodalmass": {
					"model_part_name": "Structure.Parts_Solid_Solid_Auto1",
					"variable_name": "NODAL_MAUX"
				
				},
				"couplingforces": {
					"model_part_name": "Structure.Parts_Solid_Solid_Auto1",
					"variable_name": "DEMFEM_VOLUME_COUPLING_FORCE",
					"dimension": 3
				}
				}
            }
        }
    }
}