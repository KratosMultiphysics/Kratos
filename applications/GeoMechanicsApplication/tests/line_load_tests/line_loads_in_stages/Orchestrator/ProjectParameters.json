{
"orchestrator" : {
    "name" : "Orchestrators.KratosMultiphysics.SequentialOrchestrator",
    "settings" : {
        "echo_level" : 0,
        "execution_list" : ["stage_1", "stage_2"],
        "load_from_checkpoint" : null,
        "stage_checkpoints" : false
    }
},
"stages" : {
    "stage_1" : {
        "stage_preprocess": {
            "modelers": [
                {
                    "name": "KratosMultiphysics.modelers.import_mdpa_modeler.ImportMDPAModeler",
                    "Parameters": {
                        "input_filename": "../Common/test",
                        "model_part_name": "PorousDomain"
                    }
                }
            ]
        },
        "stage_settings" : {
            "analysis_stage": "Stages.KratosMultiphysics.GeoMechanicsApplication.GeoMechanicsAnalysis",
            "problem_data": {
            "problem_name":         "test",
            "start_time":           0.0,
            "end_time":             1.0,
            "echo_level":           1,
            "parallel_type":        "OpenMP",
            "number_of_threads":    1
        },
        "solver_settings": {
            "solver_type":                        "U_Pw",
            "model_part_name":                    "PorousDomain",
            "domain_size":                        2,
            "model_import_settings":              {
                "input_type":       "use_input_model_part"
            },
            "material_import_settings":              {
                "materials_filename":       "../Common/MaterialParameters.json"
            },
            "time_stepping":              {
                "time_step":                1,
                "max_delta_time_factor":    1000
            },
            "buffer_size":                        2,
            "echo_level":                         1,
            "clear_storage":                      false,
            "compute_reactions":                  true,
            "move_mesh_flag":                     false,
            "reform_dofs_at_each_step":           false,
            "block_builder":                      true,
            "solution_type":                      "Quasi-Static",
            "scheme_type":                        "Backward_Euler",
            "reset_displacements":                true,
            "strategy_type":                      "newton_raphson",
            "convergence_criterion":              "residual_criterion",
            "residual_relative_tolerance":        1.0E-4,
            "residual_absolute_tolerance":        1.0E-9,
            "min_iterations":                     6,
            "max_iterations":                     15,
            "number_cycles":                      1,
            "reduction_factor":                   0.5,
            "increase_factor":                    2.0,
            "calculate_reactions":                true,
            "rotation_dofs":                      false,
            "linear_solver_settings":             {
                "solver_type":         "LinearSolversApplication.sparse_lu"
            },
            "problem_domain_sub_model_part_list": ["Dummy_soil"],
            "processes_sub_model_part_list":      ["Bottom_fixed","Side_sliders","Phreatic_line","First_line_load"],
            "body_domain_sub_model_part_list":    ["Dummy_soil"]
        },
        "output_processes": {
            "gid_output": [{
                "python_module": "gid_output_process",
                "kratos_module": "KratosMultiphysics",
                "process_name": "GiDOutputProcess",
                "Parameters":    {
                    "model_part_name": "PorousDomain.porous_computational_model_part",
                    "output_name": "test_stage1",
                    "postprocess_parameters": {
                        "result_file_configuration": {
                            "gidpost_flags":       {
                                "WriteDeformedMeshFlag": "WriteUndeformed",
                                "WriteConditionsFlag":   "WriteElementsOnly",
                                "GiDPostMode":           "GiD_PostAscii",
                                "MultiFileFlag":         "SingleFile"
                            },
                            "file_label":          "step",
                            "output_control_type": "step",
                            "output_interval":     1,
                            "body_output":         true,
                            "node_output":         false,
                            "skin_output":         false,
                            "nodal_results":       ["REACTION"],
                            "gauss_point_results": []
                        }
                    }
                }
            }]
        },
        "processes": {
            "constraints_process_list": [{
            "python_module": "apply_vector_constraint_table_process",
            "kratos_module": "KratosMultiphysics.GeoMechanicsApplication",
            "process_name":  "ApplyVectorConstraintTableProcess",
            "Parameters":    {
                "model_part_name": "PorousDomain.Bottom_fixed",
                "variable_name":   "DISPLACEMENT",
                "active":          [true,true,true],
                "is_fixed":        [true,true,true],
                "value":           [0.0,0.0,0.0],
                "table":           [0,0,0]
            }
        },{
            "python_module": "apply_vector_constraint_table_process",
            "kratos_module": "KratosMultiphysics.GeoMechanicsApplication",
            "process_name":  "ApplyVectorConstraintTableProcess",
            "Parameters":    {
                "model_part_name": "PorousDomain.Side_sliders",
                "variable_name":   "DISPLACEMENT",
                "active":          [true,false,false],
                "is_fixed":        [true,false,false],
                "value":           [0.0,0.0,0.0],
                "table":           [0,0,0]
            }
        },{
            "python_module": "apply_scalar_constraint_table_process",
            "kratos_module": "KratosMultiphysics.GeoMechanicsApplication",
            "process_name":  "ApplyScalarConstraintTableProcess",
            "Parameters":    {
                "model_part_name":      "PorousDomain.Phreatic_line",
                "variable_name":        "WATER_PRESSURE",
                "is_fixed":             true,
                "fluid_pressure_type": "Phreatic_Line",
                "gravity_direction":    1,
                "out_of_plane_direction":    2,
                "first_reference_coordinate" :    [0.0,0.0,0.0],
                "second_reference_coordinate":    [5.0,0.0,0.0],
                "table":                [0,0],
                "pressure_tension_cut_off":      0.0,
                "specific_weight":      0.0
            }
        }],
        "loads_process_list": [{
            "python_module": "apply_vector_constraint_table_process",
            "kratos_module": "KratosMultiphysics.GeoMechanicsApplication",
            "process_name":  "ApplyVectorConstraintTableProcess",
            "Parameters":    {
                "model_part_name": "PorousDomain.First_line_load",
                "variable_name":   "LINE_LOAD",
                "active":          [false,true,false],
                "value":           [0.0,-10.0,0.0],
                "table":           [0,0,0]
            }
        }]
        }
    }
    },
    "stage_2" : {
        "stage_settings" : {
            "analysis_stage": "Stages.KratosMultiphysics.GeoMechanicsApplication.GeoMechanicsAnalysis",
            "problem_data": {
            "problem_name":         "test",
            "start_time":           1.0,
            "end_time":             2.0,
            "echo_level":           1,
            "parallel_type":        "OpenMP",
            "number_of_threads":    1
        },
        "solver_settings": {
            "solver_type":                        "U_Pw",
            "model_part_name":                    "PorousDomain",
            "domain_size":                        2,
            "model_import_settings":              {
                "input_type":       "use_input_model_part"
            },
            "material_import_settings":              {
                "materials_filename":       "../Common/MaterialParameters.json"
            },
            "time_stepping":              {
                "time_step":                1,
                "max_delta_time_factor":    1000
            },
            "buffer_size":                        2,
            "echo_level":                         1,
            "clear_storage":                      false,
            "compute_reactions":                  true,
            "move_mesh_flag":                     false,
            "reform_dofs_at_each_step":           false,
            "block_builder":                      true,
            "solution_type":                      "Quasi-Static",
            "scheme_type":                        "Backward_Euler",
            "reset_displacements":                true,
            "strategy_type":                      "newton_raphson",
            "convergence_criterion":              "residual_criterion",
            "residual_relative_tolerance":        1.0E-4,
            "residual_absolute_tolerance":        1.0E-9,
            "min_iterations":                     6,
            "max_iterations":                     15,
            "number_cycles":                      1,
            "reduction_factor":                   0.5,
            "increase_factor":                    2.0,
            "calculate_reactions":                true,
            "rotation_dofs":                      false,
            "linear_solver_settings":             {
                "solver_type":         "LinearSolversApplication.sparse_lu"
            },
            "problem_domain_sub_model_part_list": ["Dummy_soil"],
            "processes_sub_model_part_list":      ["Bottom_fixed","Side_sliders","Phreatic_line","Second_line_load"],
            "body_domain_sub_model_part_list":    ["Dummy_soil"]
        },
        "output_processes": {
            "gid_output": [{
                "python_module": "gid_output_process",
                "kratos_module": "KratosMultiphysics",
                "process_name": "GiDOutputProcess",
                "Parameters":    {
                    "model_part_name": "PorousDomain.porous_computational_model_part",
                    "output_name": "test_stage2",
                    "postprocess_parameters": {
                        "result_file_configuration": {
                            "gidpost_flags":       {
                                "WriteDeformedMeshFlag": "WriteUndeformed",
                                "WriteConditionsFlag":   "WriteElementsOnly",
                                "GiDPostMode":           "GiD_PostAscii",
                                "MultiFileFlag":         "SingleFile"
                            },
                            "file_label":          "step",
                            "output_control_type": "step",
                            "output_interval":     1,
                            "body_output":         true,
                            "node_output":         false,
                            "skin_output":         false,
                            "nodal_results":       ["REACTION"],
                            "gauss_point_results": []
                        }
                    }
                }
            }]
        },
        "processes": {
            "constraints_process_list": [{
                "python_module": "apply_vector_constraint_table_process",
                "kratos_module": "KratosMultiphysics.GeoMechanicsApplication",
                "process_name":  "ApplyVectorConstraintTableProcess",
                "Parameters":    {
                    "model_part_name": "PorousDomain.Bottom_fixed",
                    "variable_name":   "DISPLACEMENT",
                    "active":          [true,true,true],
                    "is_fixed":        [true,true,true],
                    "value":           [0.0,0.0,0.0],
                    "table":           [0,0,0]
                }
            },{
            "python_module": "apply_vector_constraint_table_process",
            "kratos_module": "KratosMultiphysics.GeoMechanicsApplication",
            "process_name":  "ApplyVectorConstraintTableProcess",
            "Parameters":    {
                "model_part_name": "PorousDomain.Side_sliders",
                "variable_name":   "DISPLACEMENT",
                "active":          [true,false,false],
                "is_fixed":        [true,false,false],
                "value":           [0.0,0.0,0.0],
                "table":           [0,0,0]
            }
        },{
            "python_module": "apply_scalar_constraint_table_process",
            "kratos_module": "KratosMultiphysics.GeoMechanicsApplication",
            "process_name":  "ApplyScalarConstraintTableProcess",
            "Parameters":    {
                "model_part_name":      "PorousDomain.Phreatic_line",
                "variable_name":        "WATER_PRESSURE",
                "is_fixed":             true,
                "fluid_pressure_type": "Phreatic_Line",
                "gravity_direction":    1,
                "out_of_plane_direction":    2,
                "first_reference_coordinate" :    [0.0,0.0,0.0],
                "second_reference_coordinate":    [5.0,0.0,0.0],
                "table":                [0,0],
                "pressure_tension_cut_off":      0.0,
                "specific_weight":      0.0
            }
        }],
        "loads_process_list": [{
            "python_module": "apply_vector_constraint_table_process",
            "kratos_module": "KratosMultiphysics.GeoMechanicsApplication",
            "process_name":  "ApplyVectorConstraintTableProcess",
            "Parameters":    {
                "model_part_name": "PorousDomain.Second_line_load",
                "variable_name":   "LINE_LOAD",
                "active":          [false,true,false],
                "value":           [0.0,-20.0,0.0],
                "table":           [0,0,0]
            }
        }]
        }
    }
    }
}
}
